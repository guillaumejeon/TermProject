<!DOCTYPE html>
<html>
    <head>
        <title>Hello, WebVR! - A-Frame</title>
        <meta name="description" content="Hello, WebVR! - A-Frame">

        <script src="/js/aframe.min.js"></script>
        <script src="/js/spherical-env-map.js"></script>
        <script src="/js/sun-sky.js"></script>

        <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
        <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script> 
        <script src="/js/components/music-button-Component.js"></script>
        <script src="/js/components/nagivate-to-Component.js"></script>
        <script src="/js/components/set-music-Component.js"></script>
        <script src="/js/Menu.js"></script>

        <script src="js/skyGradient.js"></script>

        <script>
            AFRAME.registerComponent('animation-test', {
                schema: {},
                init: function () {
                    Context_AF = this;

                    this.el.addEventListener('click', function (e) {
                        console.log('mouseclick')
                        //this.el.setAttribute('animation', 'property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000;');
                    });

                    this.el.addEventListener('mouseleave', function (e) {
                        console.log('mouseleave')
                        //Context_AF.el.setAttribute('animation', 'property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000;');
                    });

                    this.el.addEventListener('mouseenter', function (e) {
                        console.log('mouseenter');
                        //Context_AF.el.removeAttribute('animation');
                    });

                    //animation="property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000; startEvents:mouseenter; pauseEvent:mouseleave; resumeEvents:mouseleave;"
                },
                // update: function () {},
                // tick: function () {},
                // remove: function () {},
                // pause: function () {},
                // play: function () {}
            });
        </script>

    </head>
    <body>
        <!-- <script> AFRAME.registerComponent('nextScene_onClick', {init: function () {console.log('Hello, World!')} });</script> -->
        <a-scene shadow="type:pcfsoft" stats fog="type: linear; color: #AAB; far: 90; near: 0">
          
            <a-entity laser-controls="hand: left" raycaster="objects: .links; far: 5"></a-entity>
            <a-entity laser-controls="hand: left" raycaster="objects: .links; far: 5"></a-entity>

            <a-assets timeout="3000">

<!-- Loading in models -->
                <a-asset-item id='Forest-obj' src="assets/models/Menu.obj"></a-assets-item>                  

                <a-asset-item id='MountainHouse-obj' src="assets/models/MountainHouse2.obj"></a-assets-item>
                <!-- <a-asset-item id='pagodaRoof-obj' src="assets/models/pagoda_roof.obj"></a-assets-item> -->
                <a-asset-item id='teapot-obj' src="assets/models/teapot.obj"></a-assets-item>  
                <a-asset-item id='playButton-obj' src="assets/models/playButton.obj"></a-asset-item>
                <a-asset-item id='pauseButton-obj' src="assets/models/pauseButton.obj"></a-asset-item>
                <a-asset-item id='skipForwardButton-obj' src="assets/models/skipForwardButton.obj"></a-asset-item>
                <a-asset-item id='Cliff-obj' src="assets/models/cliff.obj"></a-asset-item>
                <a-asset-item id='Everything-obj' src="assets/models/Everything.obj"></a-asset-item>
                <a-asset-item id='Clouds-obj' src="assets/models/Clouds.obj"></a-asset-item>
                <!-- <a-asset-item id='meditationMusic1' src="assets/sound/meditationMusic.mp3"></a-asset-item> -->

<!-- Loading in textures -->

                <img crossorigin="anonymous" id="cliff-texture" src="/assets/textures/ct2.png">
                <img crossorigin="anonymous" id="skymap" src="/assets/textures/Image7.jpg">


<!-- Loading in sounds -->


<!-- Not Important -->

              
            </a-assets>



<!-- Mouse controls -->

                <!-- <a-entity id="links" layout="type: line; margin: 1.5" position="0 -1 -4">
                    <a-entity template="src: #link" data-src="#cubes" data-thumb="#cubes-thumb"></a-entity>
                    <a-entity template="src: #link" data-src="#city" data-thumb="#city-thumb"></a-entity>
                    <a-entity template="src: #link" data-src="#sechelt" data-thumb="#sechelt-thumb"></a-entity>
                </a-entity> -->

                <!-- <a-entity position="-0.5 1.5 0" camera look-controls wasd-controls>
                    <a-cursor id="cursor"
                      animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                      animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                      event-set__1="_event: mouseenter; color: springgreen"
                      event-set__2="_event: mouseleave; color: black"
                      fuse="true"
                      raycaster="objects: .link"></a-cursor>
                </a-entity> -->

                

                <!-- User -->
               <a-entity position="0 1.5 0" camera look-controls>
                    <!-- <a-entity   cursor="fuse:true; fuseTimeout:500;"                                    
                                position="0 0 -1"
                                geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.03;"
                                material="shader:flat; color:black;"
                                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                      animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                      event-set__1="_event: mouseenter; color: springgreen"
                      event-set__2="_event: mouseleave; color: black" >
                    </a-entity> -->
                    
                    <!--                    
                    <a-entity
                        id="#cursor"
                        animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 50; from: 0.1 0.1 0.1; to: 1 1 1"
                        animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                        animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
                        cursor="fuse: true;"
                        material="color: #e0e9da; shader: flat"
                        position="0 0 -0.5"
                        geometry="primitive:circle; radius: 0.006" material="side: double; transparent:true; opacity: 0.5"
                        raycaster="objects: .link"
                        >
                    </a-entity>
                    -->
                    <!-- Creatintg sound -->   
            
                    <a-entity 
                        id="mMusic" 
                        position="10, 0, 10" 
                        volume="1"
                        sound="autoplay:true"
                        set-music="music:meditationMusic"
                        >
                    </a-entity>
                    
                    <!-- <a-entity
                        id="menuToggle"

                    
                    >
                    </a-entity> -->

                    <!--
                    <a-plane
                        position="0 0 -1"
                        color="#000" 
                        height="10" 
                        width="10"
                    ></a-plane>
                    -->
                </a-entity> 
        

<!-- Models -->            
                <!-- <a-entity 
                    id="rain" 
                    particle-system="preset: 
                                     rain; 
                                     color: #24CAFF; 
                                     particleCount: 1000">
                </a-entity> -->

                <!-- <a-entity
                    id="#MountainHouse-obj" 
                    obj-model="obj:#MountainHouse-obj"
                    material="color:grey"
                    position="0, 0, 0" 
                    rotation="0 180 0" 
                    scale="0.05 0.05 0.05" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;">
                </a-entity> -->
                <a-entity
                    id="#Everything-obj"
                    class="collision"
                    obj-model="obj:#Everything-obj"
                    material="color:grey"
                    position="0.2, 0.5, -34" 
                    rotation="0 0 0" 
                    scale="0.05 0.05 0.05" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;">
                </a-entity>

                <a-entity
                    id="#Clouds-obj" 
                    obj-model="obj:#Clouds-obj"
                    material="color:grey"
                    position="0.2, 0.5, -34" 
                    rotation="0 0 0" 
                    scale="0.2 0.2 0.2" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;">
                </a-entity>

                <a-box
                    color="red"
                    depth="2"
                    height="0.5"
                    width="2"
                    position="0 10 -70.544"
                >
                <a-animation attribute="position"
                    dur="20000"
                    fill = "forward"
                    to = "0 10 40"
                    repeat="indefinite"
                    >
                </a-animation>
                </a-box>

                <a-entity 
                     id="#pagodaRoof-obj" 
                     obj-model="obj:#pagodaRoof-obj"
                     material="color:grey"
                     position="-0.5, 3.5, 0.2" 
                     rotation="0 180 0" 
                     scale="0.28 0.28 0.28" 
                     shadow="cast:true; receive:true;" 
                     spherical-env-map="src:#skymap;">
                </a-entity>     
                 
                 <!-- <a-entity 
                     id="#teapot-obj" 
                     obj-model="obj:#teapot-obj"
                     material="color:silver"
                     position="0.6, 0.6, -1" 
                     rotation="0 140 0" 
                     scale="0.016 0.016 0.016" 
                     shadow="cast:true; receive:true;" 
                     spherical-env-map="src:#skymap;">
                 </a-entity>     -->

                 <a-entity 
                    id="#playButton-obj" 
                    class="link"
                    obj-model="obj:#playButton-obj"
                    material="color:silver;  visible: true"
                    position="0.1, 1.3, -4" 
                    rotation="0 0 0" 
                    scale="0.7 0.5 0.5" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    play-sound
                    >
                 </a-entity>    

                 <a-entity 
                    id="#skipForwardButton-obj" 
                    class="link"
                    obj-model="obj:#skipForwardButton-obj"
                    material="color:silver; visible: true"
                    position="0.8, 1.55, -4" 
                    rotation="0 0 0" 
                    scale="0.3 0.3 0.3" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    skip-forward-sound
                    >
                 </a-entity>    

                 <a-entity 
                    id="#skipBackButton-obj" 
                    class="link"
                    obj-model="obj:#skipForwardButton-obj"
                    material="color:silver; visible: true"
                    position="-0.4, 1.55, -4" 
                    rotation="0 180 0" 
                    scale="0.3 0.3 0.3" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    skip-back-sound
                    >
                 </a-entity>    


                 <a-entity
                    id="#menu"
                    class="link"
                    geometry="primitive: plane; width: 1; height:0.35;"
                    position="-0.8 2.6 -4" 
                    rotation="0 0 0" 
                    material="color: #e0e9da; opacity: 0.3; transparent: true; visible: true"
                    text="value: Menu; align: center; color: black; opacity: 0.6; width:3.5; font:https://cdn.aframe.io/fonts/SourceCodePro.fnt"
                    menutoggle
                    >
                 </a-entity>

                 <!-- Pseudocode:
                            Create a global boolean variable that will determine wether or not the menu button has been pressed
                            If button has been pressed then 
                                Create a function that will turns the visibility of the object on and off 
                      Note: Play around with the transparency but I think the user will be be able to click on the objects even if they are not visible

                      Use Javascript to create this function.
                -->

<!-- MENU NAVIGATION -->
<!-- 
    
                 <a-entity 
                     id="testForest"
                     class="link"
                     animation-test
                     obj-model="obj:#Forest-obj"
                     material="color:white; sphericalEnvMap:#skymap;"
                     position="0.8 2 -4" 
                     rotation="0 0 0" 
                     scale="0.012 0.012 0.012" 
                     shadow="cast:true; receive:true;" 
                     animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;"
                     navigate-to="goto_url:https://www.facebook.com/"
                     >

                 </a-entity>   

                 <a-entity 
                    src="#Forest-obj" 
                    class="link"
                    obj-model="obj:#Forest-obj"
                    material="color:white"
                    position="-0.7, 2, -4" 
                    rotation="0 0 0" 
                    scale="0.012 0.012 0.012" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    navigate-to="goto_url:https://www.instagram.com/?hl=en"
                    >
                 </a-entity>    -->

                <a-entity 
                    src="#Forest-obj" 
                    class="link"
                    obj-model="obj:#Forest-obj"
                    material="color:white"
                    position="-2.2, 2, -4" 
                    rotation="0 0 0" 
                    scale="0.012 0.012 0.012" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    navigate-to="goto_url:index.html"
                    >
                </a-entity>   

<!-- END NAVIGATION -->

<!-- Building the scene -->   
                <a-entity id="plane" 
                    geometry="primitive:plane; width:20; height:4;" position="0 0.5 0" rotation="-90 0 0" 
                    shadow="receive:true;" material="color:grey; sphericalEnvMap:#skymap; roughness:5; metalness:0.0;">
                </a-entity>
                
                <a-entity id="sky" 
                          geometry = "primitive: sphere; radius: 65;" 
                          material="shader: skyGradient; colorTop: #36688D; colorBottom: #BDA589; side: back"></a-entity>

                <!-- <a-entity id="sky"
                    geometry="primitive:sphere; radius:200;"
                    material="shader:flat; src:#skymap; side:back; height:2048; width:2048">
                </a-entity> -->

<!-- Ligthing -->   


<a-sun-sky sun-position-setter>
    <a-entity id="orbit">
      <a-animation attribute="rotation" from="0 0 0" to="0 360 0" dur="5000"
                   repeat="indefinite" easing="linear"></a-animation>
    </a-entity>
  </a-sun-sky>
                <a-entity light="type:directional; color: #FFDB99; castShadow:true; ambient:0.05; intensity:0.9; shadowBias:-0.000001; shadowMapWidth:8192; shadowMapHeight:8192;" position="18.963 1.731 -33.544"; scale="0.050 0.050 0.050"></a-entity>
                <!-- <a-entity light="type: ambient; intensity: 0.4; color: white ;"></a-entity> -->
        </a-scene>
    </body>
</html>




                <!-- <a-entity position="-0.5 1.5 0" camera look-controls wasd-controls>
                    <a-entity   cursor="fuse:true; fuseTimeout:500;"                                    
                                position="0 0 -1"
                                geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.03;"
                                material="shader:flat; color:black;" >d
                    </a-entity>
                </a-entity> -->

                <!-- geometry="primitive:ring; radiusInner:0.05; radiusOuter:0.1;" -->
