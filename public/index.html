<!DOCTYPE html>
<html>
    <head>
        <title>Hello, WebVR! - A-Frame</title>
        <meta name="description" content="Hello, WebVR! - A-Frame">

        <script src="/js/aframe.min.js"></script>
        <script src="/js/spherical-env-map.js"></script>
        <script src="/js/sun-sky.js"></script>

        <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
        <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script> 
        <script src="/js/playButtonComponent.js"></script>

        <script>
            AFRAME.registerComponent('animation-test', {
                schema: {},
                init: function () {
                    Context_AF = this;

                    this.el.addEventListener('click', function (e) {
                        console.log('mouseclick')
                        //this.el.setAttribute('animation', 'property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000;');
                    });

                    this.el.addEventListener('mouseleave', function (e) {
                        console.log('mouseleave')
                        //Context_AF.el.setAttribute('animation', 'property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000;');
                    });

                    this.el.addEventListener('mouseenter', function (e) {
                        console.log('mouseenter');
                        //Context_AF.el.removeAttribute('animation');
                    });

                    //animation="property:rotation; to:0 360 0; easing:linear; loop:true; dir:normal; dur:1000; startEvents:mouseenter; pauseEvent:mouseleave; resumeEvents:mouseleave;"
                },
                // update: function () {},
                // tick: function () {},
                // remove: function () {},
                // pause: function () {},
                // play: function () {}
            });
            
            AFRAME.registerComponent('navigate-to-forest', {
                schema: {
                    url: {dafualt: ''}
                },

                init: function () {
                    var data = this.data;
                    var el = this.el;

                    el.addEventListener('click', function () {
                        window.location.href = "https://www.facebook.com/"
                    });
                }
                
            })

           AFRAME.registerComponent('navigate-to-artic', {
                schema: {
                    url: {dafualt: ''}
                },

                init: function () {
                    var data = this.data;
                    var el = this.el;

                    el.addEventListener('click', function () {
                        window.location.href = "https://www.instagram.com/?hl=en"
                    });
                }
                
            })

            AFRAME.registerComponent('playMusic', {
                init:function () {
                    let playing = false;
                    let audio = document.querySelector("#meditationMusic");
                    this.el.addEventListener('click', () => {
                        if(!playing){
                            audio.play();
                        } else {
                            audio.pause();
                            audio.currentTime = 0;
                        }
                        playing = !playing;
                    });
                }
            })

        </script>

    </head>
    <body>
        <!-- <script> AFRAME.registerComponent('nextScene_onClick', {init: function () {console.log('Hello, World!')} });</script> -->
        <a-scene shadow="type:basic;">
            
            <a-assets timeout="3000">

<!-- Loading in models -->
                <a-asset-item id='Forest-obj' src="assets/models/Menu.obj"></a-assets-item>                  

                <a-asset-item id='MountainHouse-obj' src="assets/models/MountainHouse2.obj"></a-assets-item>
                <!-- <a-asset-item id='pagodaRoof-obj' src="assets/models/pagoda_roof.obj"></a-assets-item> -->
                <a-asset-item id='teapot-obj' src="assets/models/teapot.obj"></a-assets-item>  
                <a-asset-item id='playButton-obj' src="assets/models/playButton.obj"></a-asset-item>
                <a-asset-item id='pauseButton-obj' src="assets/models/pauseButton.obj"></a-asset-item>
                <a-asset-item id='skipForwardButton-obj' src="assets/models/skipForwardButton.obj"></a-asset-item>

                <!-- <a-asset-item id='meditationMusic1' src="assets/sound/meditationMusic.mp3"></a-asset-item> -->

<!-- Loading in textures -->
                
                <img crossorigin="anonymous" id="forestTexture" src="/assets/textures/forestTexture.png">
                <img crossorigin="anonymous" id="skymap" src="/assets/textures/Image7.jpg">


<!-- Loading in sounds -->


<!-- Not Important -->

              
            </a-assets>



<!-- Mouse controls -->

                <!-- <a-entity id="links" layout="type: line; margin: 1.5" position="0 -1 -4">
                    <a-entity template="src: #link" data-src="#cubes" data-thumb="#cubes-thumb"></a-entity>
                    <a-entity template="src: #link" data-src="#city" data-thumb="#city-thumb"></a-entity>
                    <a-entity template="src: #link" data-src="#sechelt" data-thumb="#sechelt-thumb"></a-entity>
                </a-entity> -->

                <!-- <a-entity position="-0.5 1.5 0" camera look-controls wasd-controls>
                    <a-cursor id="cursor"
                      animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                      animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                      event-set__1="_event: mouseenter; color: springgreen"
                      event-set__2="_event: mouseleave; color: black"
                      fuse="true"
                      raycaster="objects: .link"></a-cursor>
                </a-entity> -->

                

               <a-entity position="-0.5 1.5 0" camera look-controls>
                    <!-- <a-entity   cursor="fuse:true; fuseTimeout:500;"                                    
                                position="0 0 -1"
                                geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.03;"
                                material="shader:flat; color:black;"
                                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                      animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                      event-set__1="_event: mouseenter; color: springgreen"
                      event-set__2="_event: mouseleave; color: black" >
                    </a-entity> -->
                    <a-entity
                        animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 50; from: 0.1 0.1 0.1; to: 1 1 1"
                        animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                        animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
                        cursor="fuse: true;"
                        material="color: #e0e9da; shader: flat"
                        position="0 0 -0.5"
                        geometry="primitive:circle; radius: 0.008" material="side: double"
                        raycaster="objects: .link">
                    </a-entity>
                </a-entity> 
        

<!-- Models -->            
                <!-- <a-entity 
                    id="rain" 
                    particle-system="preset: 
                                     rain; 
                                     color: #24CAFF; 
                                     particleCount: 1000">
                </a-entity> -->

                <a-entity
                    id="#MountainHouse-obj" 
                    obj-model="obj:#MountainHouse-obj"
                    material="color:grey"
                    position="0, 0, 0" 
                    rotation="0 180 0" 
                    scale="0.05 0.05 0.05" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;">
                </a-entity>

                <a-entity 
                     id="#pagodaRoof-obj" 
                     obj-model="obj:#pagodaRoof-obj"
                     material="color:grey"
                     position="-0.5, 3.5, 0.2" 
                     rotation="0 180 0" 
                     scale="0.28 0.28 0.28" 
                     shadow="cast:true; receive:true;" 
                     spherical-env-map="src:#skymap;">
                </a-entity>     
                 
                 <a-entity 
                     id="#teapot-obj" 
                     obj-model="obj:#teapot-obj"
                     material="color:silver"
                     position="0.6, 0.6, -1" 
                     rotation="0 140 0" 
                     scale="0.016 0.016 0.016" 
                     shadow="cast:true; receive:true;" 
                     spherical-env-map="src:#skymap;">
                 </a-entity>    

                 <a-entity 
                    id="#playButton-obj" 
                    class="link"
                    obj-model="obj:#playButton-obj"
                    material="color:silver"
                    position="1, 2.5, -4" 
                    rotation="0 0 0" 
                    scale="0.8 0.6 0.6" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    play_sound
                    >
                 </a-entity>    

                 <a-entity 
                    id="#skipForwardButton-obj" 
                    class="link"
                    obj-model="obj:#skipForwardButton-obj"
                    material="color:silver"
                    position="1.6, 2.75, -4" 
                    rotation="0 0 0" 
                    scale="0.4 0.4 0.4" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    >
                 </a-entity>    

                 <a-entity 
                    id="#skipBackButton-obj" 
                    class="link"
                    obj-model="obj:#skipForwardButton-obj"
                    material="color:silver"
                    position="0.4, 2.75, -4" 
                    rotation="0 180 0" 
                    scale="0.4 0.4 0.4" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    >
                 </a-entity>    


                 <a-entity 
                     id="testForest"
                     class="link"
                     animation-test
                     obj-model="obj:#Forest-obj"
                     material="color:white; sphericalEnvMap:#skymap;"
                     position="0.8 2 -4" 
                     rotation="0 0 0" 
                     scale="0.012 0.012 0.012" 
                     shadow="cast:true; receive:true;" 
                     animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;";
                     navigate-to-forest=''
                     >

                 </a-entity>   

                 <a-entity 
                    src="#Forest-obj" 
                    class="link"
                    obj-model="obj:#Forest-obj"
                    material="color:white"
                    position="-0.7, 2, -4" 
                    rotation="0 0 0" 
                    scale="0.012 0.012 0.012" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    navigate-to-artic=''
                    >
                 </a-entity>   

                <a-entity 
                    src="#Forest-obj" 
                    class="link"
                    obj-model="obj:#Forest-obj"
                    material="color:white"
                    position="-2.2, 2, -4" 
                    rotation="0 0 0" 
                    scale="0.012 0.012 0.012" 
                    shadow="cast:true; receive:true;" 
                    spherical-env-map="src:#skymap;"
                    animation="property:rotation.z; to:360; easing:linear; autoplay:false; loop:true; dir:normal; dur:4000; pauseEvents:mouseleave; resumeEvents:mouseenter;"
                    >
                </a-entity>   

<!-- Building the scene -->   
                <a-entity id="plane" 
                    geometry="primitive:plane; width:20; height:4;" position="0 0.5 0" rotation="-90 0 0" 
                    shadow="receive:true;" material="color:grey; sphericalEnvMap:#skymap; roughness:5; metalness:0.0;">
                </a-entity>
                
                <!-- <a-entity id="sky"
                    geometry="primitive:sphere; radius:200;"
                    material="shader:flat; src:#skymap; side:back; height:2048; width:2048">
                </a-entity> -->


<!-- Creatintg sound -->   
            
                <a-entity 
                    id="meditationMusic" 
                    position="10, 0, 10" 
                    volume="1"
                    sound="src: assets/sound/meditationMusic0.mp3;"
                    >
                </a-entity> 

                <a-entity 
                    id="meditationMusic" 
                    position="10, 0, 10" 
                    sound="src: assets/sound/meditationMusic1.mp3;"
                    >
                 </a-entity> 

<!-- Ligthing -->   


<a-sun-sky sun-position-setter>
    <a-entity id="orbit">
      <a-animation attribute="rotation" from="0 0 0" to="0 360 0" dur="5000"
                   repeat="indefinite" easing="linear"></a-animation>
    </a-entity>
  </a-sun-sky>
                
                <a-entity light="type:directional; color: #87ceeb; castShadow:true; intensity:0.6; shadowBias:-0.000001; shadowMapWidth:3840; shadowMapHeight: 2160;" position="-0.3 1.2 1"></a-entity>
                <!-- <a-entity light="type: ambient; intensity: 0.4; color: #fff06b ;"></a-entity> -->
        </a-scene>
    </body>
</html>




                <!-- <a-entity position="-0.5 1.5 0" camera look-controls wasd-controls>
                    <a-entity   cursor="fuse:true; fuseTimeout:500;"                                    
                                position="0 0 -1"
                                geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.03;"
                                material="shader:flat; color:black;" >d
                    </a-entity>
                </a-entity> -->

                <!-- geometry="primitive:ring; radiusInner:0.05; radiusOuter:0.1;" -->